<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Ruby语言学习 | null</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Ruby语言学习">
<meta property="og:type" content="article">
<meta property="og:title" content="Ruby语言学习">
<meta property="og:url" content="http://www.loongeek.com/2016/06/30/ruby语言学习/index.html">
<meta property="og:site_name">
<meta property="og:description" content="Ruby语言学习">
<meta property="og:updated_time" content="2016-08-18T14:08:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ruby语言学习">
<meta name="twitter:description" content="Ruby语言学习">
  
    <link rel="alternative" href="atom.xml" title="null" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">null</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Loongeek’s Blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">存档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.loongeek.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post_catalog-ruby语言学习" class="article article-type-post_catalog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/30/ruby语言学习/" class="article-date">
  <time datetime="2016-06-29T16:00:00.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/软件/">软件</a>►<a class="article-category-link" href="/categories/软件/语言/">语言</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Ruby语言学习
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      

    <ol class="toc" ><li class="toc-item toc-level-1"><a class="toc-link" href="#BOOK_I_THE_BOOK_OF_RUBY"><span class="toc-text">BOOK I  THE BOOK OF RUBY</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串，数字，类和对象"><span class="toc-text">字符串，数字，类和对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类继承，属性，类变量"><span class="toc-text">类继承，属性，类变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串和范围"><span class="toc-text">字符串和范围</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组和哈希"><span class="toc-text">数组和哈希</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环和迭代"><span class="toc-text">循环和迭代</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件"><span class="toc-text">条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法"><span class="toc-text">方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参数和返回值"><span class="toc-text">参数和返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#异常处理"><span class="toc-text">异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#块，Proc和lambda"><span class="toc-text">块，Proc和lambda</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#符号"><span class="toc-text">符号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块和mixin"><span class="toc-text">模块和mixin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件与IO"><span class="toc-text">文件与IO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#YAML"><span class="toc-text">YAML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Marshal_(略)"><span class="toc-text">Marshal (略)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式"><span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#线程"><span class="toc-text">线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调试和测试"><span class="toc-text">调试和测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby_on_Rails"><span class="toc-text">Ruby on Rails</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动态编程"><span class="toc-text">动态编程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#BOOK_II_PROGRAMMING_RUBY"><span class="toc-text">BOOK II PROGRAMMING RUBY</span></a></li></ol>

        <p>Ruby语言学习<br><a id="more"></a></p>
<h1 id="BOOK_I_THE_BOOK_OF_RUBY">BOOK I  THE BOOK OF RUBY</h1><h2 id="字符串，数字，类和对象">字符串，数字，类和对象</h2><ul>
<li><code>puts</code>换行 <code>print</code>不换行</li>
<li>打印使用<code>&#39; &#39;</code>不计算表达式，<code>&quot; &quot;</code>计算表达式</li>
<li>打印字符串表达式：<code>#{expression}</code></li>
<li>大小写敏感</li>
<li>注释: 单行 <code>#</code>,   多行 <code>=begin =end</code> (从左边界开始)</li>
<li><code>to_f</code>字符串转成浮点，失败返回0.0</li>
<li><code>if  then        end</code>     end是必须要写的</li>
<li>变量定义默认是局部变量，全局变量前加$<code>$XXX</code></li>
<li><p>定义类</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XXX</span> <span class="comment">#约定类名首字母大写</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> </span>xxx</span><br><span class="line">        <span class="variable">@XXX</span> = <span class="constant">XXX</span> <span class="comment">#可以直接通过赋值来定义实例变量</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成实例： <code>XXX.new</code></p>
</li>
<li>变量未定义会返回<code>nil</code></li>
<li><p>程序自身是Object型，main对象</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="keyword">self</span> <span class="comment"># main</span></span><br><span class="line">puts <span class="keyword">self</span>.<span class="keyword">class</span> <span class="comment"># Object</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>类的基本成员： </p>
<ul>
<li><code>initialize</code>初始化 </li>
<li><code>to_s</code>显示字串描述</li>
<li><code>inspect</code>显示详细字串描述(对象会显示实例变量的值等)</li>
<li><code>p(obj)</code>直接打印对象的inspect</li>
</ul>
</li>
</ul>
<h2 id="类继承，属性，类变量">类继承，属性，类变量</h2><ul>
<li>类名首字母大写</li>
<li>继承 <code>class child &lt; parent</code> </li>
<li>初始化中记得调用<code>super(xxx,xxx,...)</code></li>
<li>无初始化默认调用超类的初始化；有初始化必须在初始化函数中手动调超类的初始化</li>
<li>超类初始化:  <code>super(a,b,c,...)</code><br>  <code>super</code> 使用所有参数调用<br>  <code>super()</code> 无参</li>
<li>访问器方法  <ul>
<li><code>def attr_name</code> getter方法</li>
<li><code>def attr_name=() ....</code> setter方法,=前后不要加空格</li>
<li><code>attr_reader (:attr1,:attr2)</code> 访问器方法简写<br>  <code>attr_writer (:attr1,:attr2)</code> 只有一个参数时，括号可以去掉<br>  <code>attr_accessor (:attr1,:attr2)</code></li>
</ul>
</li>
<li>类变量 <code>@@XXXX</code></li>
<li>在类中定义常量：<code>Axx = 10</code> 调用类常量：<code>X::A</code></li>
<li>创建内嵌类实例：<code>X::Y.new</code></li>
<li><code>.superclass</code> 查看超类，<code>Object</code>的超类是<code>BasicObject</code>，后者超类是nil</li>
<li>部分类：可以向标准类添加方法，使用同一个类名定义。也可以向已有的类添加扩展</li>
</ul>
<h2 id="字符串和范围">字符串和范围</h2><ul>
<li>用户可以自定义字符串的限界符：<code>%Qx...x</code> <code>%x ... x</code>替换双引号  <code>%qx...x</code>替换单引号</li>
<li><code>puts(``dir``)</code> <code>puts(%x/dir/)</code> <code>puts(%x{dir})</code>  先执行系统命令，再打印返回值</li>
<li>字符串:  <code>&#39;a&#39;&lt;&lt;5</code>     <code>&#39;a&#39;+5.to_s</code>      <code>&#39;a&#39; &#39;b&#39;</code><br>  字符串方法会拷贝创建新字符串，但是以<code>!</code>结尾的不会 </li>
<li>字符串可以用索引和索引范围来切片</li>
<li><code>chop</code> <code>chomp</code> (建议采用) 去掉行结束符<br>  <code>$/ = &#39;x&#39;</code> 指定行结束符</li>
<li>从范围创建数组  <code>(1..10).to_a</code></li>
<li><p>定义大段文字的变量时</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-heredoc = &lt;&lt; <span class="constant">BEGINSYMBOL</span></span><br><span class="line">    ...........</span><br><span class="line">..............</span><br><span class="line"><span class="constant">ENDSYMBOL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串字面量：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%q/ /  #''</span><br><span class="line">%Q/ / %/ /  # ""</span><br><span class="line"> %w/ / %W/ / # 相当于用逗号隔开的数组字面量 , , , ,</span><br><span class="line"> %r| | #正则表达式</span><br><span class="line"> %s/ / #符号 :XXX</span><br><span class="line"> %x/ / #系统命令 ``</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数组和哈希">数组和哈希</h2><ul>
<li>数组可以包括不同类型的元素</li>
<li><code>Dir.entries(&#39;XXXX&#39;)</code> 返回目录下的所有值组成的数组</li>
<li>初始化：<code>Array.new</code> <code>Array.new(2)</code> <code>Array.new(2, &quot;sjsjs&quot;)复制多个初始值</code></li>
<li>多维数组  <code>a=[ [1,2,3,4],[2,3,4,5]]</code></li>
<li><p>数组迭代</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (x,x,x,x) <span class="keyword">in</span> <span class="constant">XXX</span></span><br><span class="line">    ....</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数组索引</p>
</li>
<li>拷贝数组: 引用型 arr2=arr1 拷贝型 arr2=arr1.clone</li>
<li>数组相等运算： <code>&lt;=&gt;</code></li>
<li>排序：<br>  <code>arr.sort{|a,b| a.to_s &lt;=&gt; b.to_s}</code></li>
<li>自定义类的比较：<code>include Comparable</code>   <code>def &lt;=&gt; (object) end</code></li>
<li><code>&lt;=&gt;</code> return -1 0 1<br>  <code>&lt;</code>, <code>==</code>, <code>&gt;</code> return true or false , 必须首先定义了<code>&lt;=&gt;</code></li>
<li>数组操作：<ul>
<li><code>&amp;</code> <code>+</code> <code>-</code> <code>&lt;&lt;</code>(会修改第一个数组)</li>
<li><code>clear</code> 清除，修改数组</li>
<li><code>compact</code>, <code>compact!</code> 去掉nil</li>
<li><code>delete(object)</code> <code>delete_at(index)</code> 删除</li>
<li><code>flatten</code> <code>flatten!</code> 扁平化数组</li>
<li><code>length</code></li>
<li><code>reverse</code> <code>reverse!</code> 反转数组</li>
<li><code>sort</code> <code>sort!</code> 排序<br>带!号的表示会修改原始数组，不带!号的创建新数组<br>注意&lt;&lt;一个数组，会把数组做为一个元素加到最后； +会把数组的所有元素依次加入</li>
</ul>
</li>
<li>创建哈希表：<code>Hash.new</code> <code>Hash.new(&quot;XXX&quot;)</code>(带默认值)</li>
<li><p>简写。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">h=&#123;<span class="string">'x'</span>=&gt;<span class="string">'x'</span>,</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ruby的哈希表，同一个键定义多次，采用最后一次的值</p>
</li>
<li>默认值：<code>.default</code>  <code>.default=</code></li>
<li>拷贝：<code>hash2=hash1</code> <code>hash2=hash1.clone</code></li>
<li>哈希表的元素顺序不确定。要对哈希表排序，需要自己手写排序程序</li>
<li>哈希方法：<ul>
<li>hash.delete(key)</li>
<li>hash.keys hash.values</li>
<li>hash.has_value? hash.has_key?</li>
</ul>
</li>
<li>矢量和矩阵<ul>
<li>使用时要引入模块<code>require &quot;Matrix&quot;</code></li>
<li><code>Matrix[[],[],[]]</code>  支持矩阵+和矩阵*</li>
<li><code>Vector[X]</code></li>
<li><code>Matrix.columns([v1,v2])</code></li>
<li><code>Matrix.rows([v1,v2])</code></li>
</ul>
</li>
<li>集合</li>
<li><code>Set.new([xx,xx,xx])</code> 无重复元素</li>
<li><code>.merge</code> <code>.add</code>  <code>==</code></li>
</ul>
<h2 id="循环和迭代">循环和迭代</h2><ul>
<li><p>for循环</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ... <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> (a,b,c,d) <span class="keyword">in</span> xxx <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>each循环</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xxx.each <span class="keyword">do</span> |i|</span><br><span class="line">    xxx</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">xxx.each&#123;</span><br><span class="line">    |x|</span><br><span class="line">    xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>upto downto循环</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>.upto(<span class="number">10</span>) <span class="keyword">do</span> xxxx <span class="keyword">end</span></span><br><span class="line"><span class="number">10</span>.downto(<span class="number">0</span>) <span class="keyword">do</span> xxxx <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>while循环</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="constant">XX</span> &#123;&#125; </span><br><span class="line"><span class="constant">XXX</span> <span class="keyword">while</span> <span class="constant">XXX</span> <span class="comment">#条件不对，一次都不运行</span></span><br><span class="line">&#123; ssss&#125; <span class="keyword">while</span> <span class="constant">XXX</span> <span class="comment">#至少运行一次</span></span><br><span class="line"><span class="keyword">until</span> <span class="comment">#与while用法相同，相当于 while not</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>loop循环,无限循环，手动跳出</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loop &#123;......<span class="keyword">break</span>;.........&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enumerable模块(<code>include Enumerable</code>)</p>
<ul>
<li>collect{|i| xxx} 对每个元素操作</li>
<li>include?() </li>
<li>min 返回最小元素，没有定义比较时返回数字值最小的</li>
<li>max 返回最大元素，没有定义比较时返回数字值最大的</li>
</ul>
</li>
</ul>
<h2 id="条件">条件</h2><ul>
<li><code>if then elsif else end</code> <code>?:</code> <code>unless</code></li>
<li>执行语句只有一句的时候，if和unless可以放在最后面</li>
<li><code>case(xx) when xx then xxx else xxx end</code></li>
<li><code>and</code> <code>or</code> <code>not</code>, priority of <code>or</code> is lower than <code>and</code>, but <code>&amp;&amp;</code> <code>||</code> is the same</li>
<li><code>(6..7)===i</code>相当于(6..7).include?(i)</li>
<li><code>xxx=case ... end</code> 可以直接从case中返回一个值</li>
<li><code>puts() if DEBUG</code>  (constant DEBUG is used as debug switcher)</li>
<li><code>Object.constants</code> <code>const_get</code> <code>const_set</code></li>
<li><code>catch(:ddd){ ... throw :ddd ...}</code> 用于跳出语句块，<strong>注意：这个不是异常捕捉</strong></li>
</ul>
<h2 id="方法">方法</h2><ul>
<li><code>def xxClass.xxxxx</code> 定义类方法</li>
<li><code>@@xxxx = xxx</code> 定义类变量</li>
<li><code>xxClass.new</code> 构造器，但是最好不要重载 <code>initialize</code> 构造器</li>
<li><code>.singleton_methods</code>打印出所有单例方法<br>  <code>def xxObject.xxMethod</code> 为特定对象创建单例方法</li>
<li><p>定义以xxClass为父类的单例</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xxx= xxClass.new</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="inheritance">&lt;</span><span class="inheritance">&lt; <span class="parent">xxx</span></span> </span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以使用<code>.send(:xxx, args)</code>的方式调用保护或者私有的成员方法</p>
</li>
<li>可以在<code>class &lt;&lt; self end</code>中定义类方法，不用再在前面加类名</li>
<li>方法名默认用小写</li>
</ul>
<h2 id="参数和返回值">参数和返回值</h2><ul>
<li>返回多个值：<code>return a,x,b,...</code>，返回一个数组，也可以返回其它collection类型</li>
<li>可以为参数指定默认值 <code>def xx(a=xx,b=xx)</code></li>
<li>可以指定最后一个参数为可变参数<code>def xx(a=xx,b,*c)</code>,最后一个参数被当做数组类型</li>
<li>可以并行赋值<code>a,b,c=A,B,C</code></li>
<li>使用<code>==</code>判断是否相等，使用<code>equal?</code>判断引用是否相同</li>
<li>ruby按引用传递</li>
</ul>
<h2 id="异常处理">异常处理</h2><ul>
<li>处理异常。<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">    ...</span><br><span class="line">    [raise xxxException]  <span class="comment">#抛出异常</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="constant">Exception</span> =&gt; exceptionName <span class="comment">#可以省略=&gt;，用$!表示异常，但不推荐这么做。也可以指定特定的异常类型</span></span><br><span class="line">    ...</span><br><span class="line">    [<span class="keyword">retry</span>] <span class="comment">#可以重新执行出错的代码部分</span></span><br><span class="line"><span class="keyword">else</span>    <span class="comment">#如果没有错误，执行这里</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">ensure</span> <span class="comment">#相当于finally</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="块，Proc和lambda">块，Proc和lambda</h2><ul>
<li>创建Proc: <code>Proc.new{|x| xxxxx}</code> <code>lambda{|x| xxxx}</code> <code>proc{|x| xxxx}</code></li>
<li>调用Proc: <code>.call</code></li>
<li><code>yield</code>调用函数后跟的语句块<code>fun(xx,xx){xxxxx}</code>,也可以用<code>fun(xx,&amp;xx)</code>显式指定语句块</li>
<li>块使用创建它的对象的上下文及其实例变量，如果在全局创建，那么就使用main做为上下文</li>
<li>块会不会改变局部变量的值？？(待细化)</li>
</ul>
<h2 id="符号">符号</h2><ul>
<li>符号不能被赋值，它的值就是它自己</li>
<li>相同字串不是同一个对象，但是相同的符号是一个对象</li>
<li>符号创建后，在任何作用域里都是同一个</li>
<li><code>:x.id2name</code>返回名称字符，或者赋值给它的符号</li>
<li><code>method(:fooName).call()</code>可以调用名称为fooName的函数</li>
<li>符号经常被用做hash的键；或者用于动态编程时定义函数名</li>
</ul>
<h2 id="模块和mixin">模块和mixin</h2><ul>
<li>与类基本一致，除了不能被模块继承，不能创建实例。</li>
<li>模块可以被类继承</li>
<li>模块可以被当做命名空间使用</li>
<li>模块可以通过<code>include</code>，被当做接口使用</li>
<li>可以在模块中指定<code>alias aliasFooName fooName</code>，以免多模块函数命名冲突</li>
<li><code>require(&quot;xxxx&quot;)</code> 从文件中导入模块</li>
<li><code>$:</code>指定了ruby模块搜索路径</li>
<li>预定义模块</li>
<li>Comparable: 定义<code>&lt;=&gt;</code>,实现&lt;, &lt;=, ==, &gt;=, 和&gt;，以及方法<code>between?</code></li>
<li>Enumerable: 必须提供函数<code>each</code></li>
<li>FileTest: 文件测试函数。可以在File类中访问其方法</li>
<li>GC: 垃圾回收</li>
<li>Kernel: Object包含的模块，定义了内建方法</li>
<li>Math:  基本三角函数和超越函数，有同名的模块方法和实例方法</li>
<li>ObjectSpace:  与GC交互，支持遍历所有活动对象</li>
<li>Precision: 一个mixin, 只能被Real类的子集包含，带精度的数值类</li>
<li>Process: 操作进程的模块。所有方法都是模块方法</li>
<li>Signal: 处理进程信号。</li>
<li>使用<code>method_func :foo</code>指定实例函数同时是模块函数</li>
<li>使用<code>obj.extend(moduleName,xxx)</code>，给对象扩展模块；使用<code>obj.freeze</code>阻止扩展</li>
</ul>
<h2 id="文件与IO">文件与IO</h2><ul>
<li><code>IO.foreach(&quot;filepath&quot;){|line| xxxx}</code>或者<code>IO.readlines(&quot;filepath&quot;)</code></li>
<li><code>File</code>继承自IO，操作同上</li>
<li><p>文件操作</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="constant">File</span>.new(<span class="string">"file.txt"</span>,<span class="string">"w"</span>) <span class="comment">#或者File.open</span></span><br><span class="line">f.puts(<span class="string">"xxx"</span>)</span><br><span class="line"><span class="keyword">while</span>(!f.eof)&#123;</span><br><span class="line">    c = f.getc()</span><br><span class="line">    putc(c+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(f.eof) <span class="keyword">then</span> ... <span class="keyword">end</span></span><br><span class="line">f.close</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>File.exist?</code>  <code>File.directory?</code> <code>File.size</code></p>
</li>
<li><code>FileUtil.cp()</code> <code>FileUtil.mkdir()</code></li>
</ul>
<h2 id="YAML">YAML</h2><ul>
<li><code>require &quot;yaml&quot;</code>, 然后使用<code>to_yaml</code>转换。使用YAML可以以字符串的形式序列化对象</li>
<li>使用<code>y()</code>来显示yaml输出，类似p()</li>
<li><code>YAML.dump</code>保存到字串或者文件， <code>YAML.load</code>从文件或字串读取， <code>YAML.load_documents</code>从文件读取多个YAML文档</li>
<li><code>to_yaml_properties</code> 在其中定义字串数组<code>[&quot;@attr&quot;,&quot;@attr&quot;]</code>，保存指定的实例变量</li>
</ul>
<h2 id="Marshal_(略)">Marshal (略)</h2><h2 id="正则表达式">正则表达式</h2><ul>
<li><code>/regex/ =~ &quot;target-string&quot;</code></li>
<li><code>Regexp.new</code> <code>/xxx/</code>  <code>%r{xxxx}</code></li>
<li><code>()</code>表示group,用$1,$2,$3…表示每个组的匹配结果</li>
<li><code>.match</code>返回匹配结果，对匹配结果使用<code>.captures</code>返回组匹配数组，使用<code>to_a</code>返回含匹配结果(第0个元素)的组匹配数组</li>
<li>可以使用<code>$~</code>表示上一个匹配结果，用数组下标表示第几组匹配结果，但是要支持完整的数组操作(比如sort)，还是要用to_a或者captures去转化</li>
<li><code>.prematch</code>或$`返回匹配项前的内容；<code>.postmatch</code>或$’返回匹配项后面的内容</li>
<li>默认<code>+</code>和<code>*</code>都是贪婪的。可以在后面加?,如<code>+?</code> <code>*?</code>让它变成最短匹配</li>
<li>字串操作：<ul>
<li><code>scan(regex){block}</code> 找出所有匹配项</li>
<li><code>slice</code> <code>slice!</code>子串 </li>
<li><code>split</code> <code>split!</code>分割 </li>
<li><code>sub</code> <code>sub!</code>替换第一个 <code>gsub</code> <code>gsub!</code>全替换，替换字串中用<code>\1</code> <code>\2</code>表示匹配组</li>
</ul>
</li>
<li>符号也可以用正则表达式，在匹配时按名字的字符串来匹配</li>
</ul>
<h2 id="线程">线程</h2><ul>
<li><code>Thread.new{blocks}</code></li>
<li>默认运行在<code>Thread.main</code>下</li>
<li><code>Thread.current</code>当前线程</li>
<li><code>.status</code>查看当前线程状态，<code>.inspect</code>一样，不过会将false和nil状态合并成dead</li>
<li>线程状态：run, sleep, aborting正在中止，false正常终止，nil异常终止</li>
<li><code>Thread.new{block}.join</code>可以暂停当前线程，等新线程返回后再继续执行</li>
<li>只创建不启动： <code>Thread.new{Thread.stop xxxxx}</code>,然后手动调用<code>.run</code></li>
<li><code>.priority</code>设定优先级，数字大优先级高。main线程的优先级是0</li>
<li>线程内部可以调用<code>Thread.pass</code>释放CPU</li>
<li>旗语：<code>Mutex.new()</code>  使用时用<code>.synchronize</code>保护需要互斥的语句</li>
<li>纤程： </li>
<li><code>Fiber.new</code> 创建时不会启动，需要手动<code>.resume</code>。resume能够接受参数</li>
<li>从纤程返回时，在纤程内部手动<code>Fiber.yield</code>。yield可以返回值<code>ret = Fiber.yield xxxx</code></li>
</ul>
<h2 id="调试和测试">调试和测试</h2><ul>
<li>单元测试：<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">"test/unit"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myTest</span> <span class="inheritance">&lt; <span class="parent">Test::Unit</span></span>::<span class="title">TestCase</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> </span>test1</span><br><span class="line">     assert_xxxx()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> </span>test2</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Ruby_on_Rails">Ruby on Rails</h2><ul>
<li>创建rails: <code>rails new xxxxx</code></li>
<li>运行WEBrick: <code>rails server -pxxxx</code></li>
<li>创建控制器: <code>rails generate controller controllerName action1 action2</code></li>
<li>在控制器中定义的实例变量，可以在view中用标签<code>&lt;%= xxx %&gt;</code>来调用，如果是字串应当用<code>&lt;%= raw(xxx) %&gt;</code>来引用</li>
<li>在routes.rb中指定寻址路由</li>
<li>在erb文件中使用<code>&lt;% %&gt;</code>来嵌入ruby代码，使用<code>&lt;%= %&gt;</code>来引用ruby表达式</li>
<li>创建Blog流程：<ul>
<li>创建框架</li>
<li>创建数据库</li>
<li>创建scaffold，指定数据库模型</li>
<li>迁移数据库：<code>rake db:migrate</code></li>
<li>创建partial视图，并引用<code>&lt;%= render :partial =&gt; &quot;xxx&quot;, :object =&gt; @post %&gt;</code></li>
</ul>
</li>
</ul>
<h2 id="动态编程">动态编程</h2><ul>
<li>执行字串：<code>eval</code> <code>instance_eval</code> <code>class_eval</code> <code>module_eval</code></li>
<li>添加变量： <ul>
<li><code>class_variable_set</code> <code>class_variable_get</code> <code>class_variables</code> </li>
<li><code>instance_variable_set</code> …</li>
<li><code>const_get</code> <code>const_set</code></li>
</ul>
</li>
<li><code>send</code>调用函数，<code>remove_method</code>删除方法 <code>undef_method</code>即使祖先定义了，也不可用该方法，<code>method_missing</code>处理无效方法的方法</li>
<li>实时创建类：<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">className = <span class="string">"MyClass"</span></span><br><span class="line"><span class="constant">Object</span>.const_set(className,<span class="constant">Class</span>.new)</span><br><span class="line">className = <span class="constant">Object</span>.const_get(className)</span><br><span class="line"><span class="symbol">className:</span><span class="symbol">:module_eval</span>&#123; define_method(<span class="symbol">:myMethod</span>)&#123;</span><br><span class="line">    block &#125; &#125;</span><br><span class="line">... ...</span><br><span class="line">x = className.new</span><br><span class="line">x.myMethod</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="BOOK_II_PROGRAMMING_RUBY">BOOK II PROGRAMMING RUBY</h1><p>1.基础<br>ruby , irb<br>Linux下的Shebang:  </p>
<pre><code><span class="shebang">#! /usr/local/bin/ruby -w</span>
</code></pre><p>查看文档说明<br>ri PARAM<br>真正的面向对象语言：对象，变量，方法。  number.abs,   name.length<br>第一个示例<br>2.RUBY环境<br>3.高级<br><!--less--><br>4.参考库</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.loongeek.com/2016/06/30/ruby语言学习/" data-id="cis0exgmr001ppjjfsni6zj3s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Programming-Language/">Programming Language</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li></ul>

      
	  	<a id="back-to-top" href="javascript:scroll(0,0);"><i class="icon" id="icon-angle-up"></i></a>
	  
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/06/30/零碎技巧/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          零碎技巧
        
      </div>
    </a>
  
  
    <a href="/2016/06/29/IOS学习笔记——作业/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">IOS学习笔记——作业</div>
    </a>
  
</nav>

  
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CG/">CG</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CG/Blender/">Blender</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CG/理论/">理论</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/外语/">外语</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/文学/">文学</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/文学/随笔/">随笔</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/">软件</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/软件/App/">App</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/GUI/">GUI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/后端/">后端</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/工具/">工具</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/游戏开发/">游戏开发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/理论/">理论</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/语言/">语言</a><span class="category-list-count">9</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/App/" style="font-size: 20px; color: #fa6">App</a> <a href="/tags/Backend/" style="font-size: 10px; color: #636">Backend</a> <a href="/tags/Blender/" style="font-size: 14px; color: #a36366">Blender</a> <a href="/tags/C/" style="font-size: 10px; color: #636">C</a> <a href="/tags/CG/" style="font-size: 10px; color: #636">CG</a> <a href="/tags/Database/" style="font-size: 10px; color: #636">Database</a> <a href="/tags/English/" style="font-size: 10px; color: #636">English</a> <a href="/tags/Frontend/" style="font-size: 10px; color: #636">Frontend</a> <a href="/tags/Game/" style="font-size: 10px; color: #636">Game</a> <a href="/tags/Git/" style="font-size: 10px; color: #636">Git</a> <a href="/tags/Hexo/" style="font-size: 12px; color: #854b66">Hexo</a> <a href="/tags/IDE/" style="font-size: 10px; color: #636">IDE</a> <a href="/tags/IOS/" style="font-size: 20px; color: #fa6">IOS</a> <a href="/tags/Java/" style="font-size: 16px; color: #c27a66">Java</a> <a href="/tags/Lua/" style="font-size: 10px; color: #636">Lua</a> <a href="/tags/Macbook/" style="font-size: 10px; color: #636">Macbook</a> <a href="/tags/Markdown/" style="font-size: 10px; color: #636">Markdown</a> <a href="/tags/Notes/" style="font-size: 14px; color: #a36366">Notes</a> <a href="/tags/Plugin/" style="font-size: 10px; color: #636">Plugin</a> <a href="/tags/Programming-Language/" style="font-size: 18px; color: #e09266">Programming Language</a> <a href="/tags/Python/" style="font-size: 10px; color: #636">Python</a> <a href="/tags/Ruby/" style="font-size: 14px; color: #a36366">Ruby</a> <a href="/tags/SSH/" style="font-size: 10px; color: #636">SSH</a> <a href="/tags/Swift/" style="font-size: 10px; color: #636">Swift</a> <a href="/tags/Swing/" style="font-size: 10px; color: #636">Swing</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/08/17/RSpec学习/">RSpec学习</a>
          </li>
        
          <li>
            <a href="/2016/08/12/Gem-Gemfile-Bundle/">Gem,Gemfile,Bundle</a>
          </li>
        
          <li>
            <a href="/2016/08/11/Rack学习笔记/">Rack学习笔记</a>
          </li>
        
          <li>
            <a href="/2016/08/01/零碎知识点/">零碎知识点</a>
          </li>
        
          <li>
            <a href="/2016/08/01/数据库基础理论笔记/">数据库基础理论笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">About</h3>
    <div class="widget">
	mail: wizardof21cn@163.com
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
<div class="outer">
    <div id="footer-info" class="inner">
	<p>&copy; 2016 Loongeek</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">存档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>